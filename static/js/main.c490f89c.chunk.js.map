{"version":3,"sources":["common/Header.js","common/SubscribeBlock.js","common/SubscribeBlockMobile.js","App.js","sw.js","index.js"],"names":["Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","rights","mode","opened","toggleContext","bind","assertThisInitialized","setState","react_default","a","createElement","vkui","aside","dropdown_default","onClick","onClose","before","notification_default","asideContent","done_default","fill","style","width","data-mode","poll_default","React","Component","SubscribeBlock","animeId","anime","anime_id","animeName","anime_name","animeNameRus","anime_name_rus","shikiId","shiki_id","subStatus","sub_status","dubStatus","dub_status","shikiResp","undefined","showed","click","clickButton","e","type","console","log","status","_16_done_default","size","_this2","display","fontSize","borderTop","borderBottom","borderRight","borderLeft","borderStyle","borderColor","marginBottom","paddingTop","paddingBottom","backgroundColor","padding","color","flexWrap","height","float","alignItems","justifyContent","chevron_default","marginLeft","stretched","level","getButtonStyle","getBeforeSymbol","minWidth","marginRight","SubscribeBlockMobile","sprintf","require","App","params","queryString","parse","window","location","search","vk_viewer_group_role","userId","vk_user_id","clientType","vk_platform","subscribeTitles","data","FormData","par","append","fetch","method","body","then","resp","json","result","el","_this3","activeView","id","activePanel","common_Header","map","item","common_SubscribeBlockMobile","common_SubscribeBlock","Boolean","hostname","match","connect","subscribe","detail","schemeAttribute","document","createAttribute","value","scheme","attributes","setNamedItem","send","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.c490f89c.chunk.js","sourcesContent":["import {Cell, HeaderContext, List, PanelHeader, PanelHeaderContent} from \"@vkontakte/vkui\";\r\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\r\nimport Icon24Notification from '@vkontakte/icons/dist/24/notification';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\nimport Icon24Poll from '@vkontakte/icons/dist/24/poll';\r\nimport React from \"react\";\r\n\r\n\r\n\r\n\r\nclass Header extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            rights:props.rights,\r\n            mode:props.mode,\r\n            opened:false,\r\n        }\r\n        this.toggleContext = this.toggleContext.bind(this);\r\n    }\r\n\r\n    toggleContext(){\r\n        this.setState({opened:!this.state.opened});\r\n    }\r\n    render() {\r\n        if(this.state.rights===\"editor\" || this.state.rights===\"admin\"){\r\n            return (\r\n                <PanelHeader>\r\n                    <PanelHeaderContent aside={<Icon16Dropdown/>} onClick={this.toggleContext}>\r\n                        Уведомления\r\n                    </PanelHeaderContent>\r\n                    <HeaderContext opened={this.state.opened} onClose={this.toggleContext}>\r\n                        <List>\r\n                            <Cell\r\n                                before={<Icon24Notification />}\r\n                                asideContent={this.state.mode === 'subscribe' ? <Icon24Done fill=\"var(--accent)\" /> : <div style={ {width:'24px'}} />}\r\n                                //onClick={select}\r\n                                data-mode=\"subscribe\"\r\n                            >\r\n                                Уведомления\r\n                            </Cell>\r\n                            <Cell\r\n                                before={<Icon24Poll />}\r\n                                asideContent={this.state.mode === 'statistic_full' ? <Icon24Done fill=\"var(--accent)\" /> : <div style={ {width:'24px'}} /> }\r\n                                //onClick={select}\r\n                                data-mode=\"statistic_full\"\r\n                            >\r\n                                Статистика\r\n                            </Cell>\r\n                            <Cell\r\n                                before={<Icon24Poll />}\r\n                                asideContent={this.state.mode === 'statistic_cur' ? <Icon24Done fill=\"var(--accent)\" /> : <div style={ {width:'24px'}} />}\r\n                                //onClick={select}\r\n                                data-mode=\"statistic_cur\"\r\n                            >\r\n                                Статистика текущий сезон\r\n                            </Cell>\r\n\r\n                        </List>\r\n                    </HeaderContext>\r\n                </PanelHeader>\r\n            );\r\n        } else {\r\n            return (<PanelHeader>Уведомления</PanelHeader>);\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Header;","import React from 'react';\r\nimport {\r\n    Button,\r\n    Spinner\r\n\r\n} from '@vkontakte/vkui';\r\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\r\nimport Icon16Chevron from '@vkontakte/icons/dist/16/chevron';\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\r\n\r\nclass SubscribeBlock extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            animeId: props.anime.anime_id,\r\n            animeName: props.anime.anime_name,\r\n            animeNameRus: props.anime.anime_name_rus,\r\n            shikiId: props.anime.shiki_id,\r\n            subStatus: props.anime.sub_status,\r\n            dubStatus: props.anime.dub_status,\r\n            shikiResp: undefined,\r\n            opened: false,\r\n            showed: props.anime.showed\r\n        };\r\n        this.click = this.click.bind(this);\r\n        this.clickButton = this.clickButton.bind(this);\r\n    }\r\n\r\n    click(e) {\r\n        this.setState({opened: !this.state.opened})\r\n    }\r\n\r\n    clickButton(e, type) {\r\n        console.log(e)\r\n        if ((type === 0 && (this.state.subStatus !== -2 && this.state.subStatus !== -1)) || (type === 1 && (this.state.dubStatus !== -2 && this.state.dubStatus !== -1))) {\r\n            switch (type) {\r\n                case 0:\r\n                    this.setState({subStatus: -2});\r\n                    break;\r\n                case 1:\r\n                    this.setState({dubStatus: -2});\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    getButtonStyle(status) {\r\n        switch (status) {\r\n            case -1:\r\n                return \"secondary\";\r\n            case 0:\r\n                return \"primary\";\r\n            case 1:\r\n                return \"outline\";\r\n            case -2:\r\n                return \"secondary\";\r\n\r\n        }\r\n    }\r\n\r\n    getBeforeSymbol(status) {\r\n        switch (status) {\r\n            case 1:\r\n                return <Icon16Done/>;\r\n            case -2:\r\n                return <Spinner size={\"small\"}/>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.showed) {\r\n            return (\r\n                <div style={{\r\n                    \"display\": \"block\",\r\n                    \"fontSize\": \"13px\",\r\n                    \"borderTop\": \"0px\",\r\n                    \"borderBottom\": \"1px\",\r\n                    \"borderRight\": \"0px\",\r\n                    \"borderLeft\": \"0px\",\r\n                    \"borderStyle\": \"solid\",\r\n                    \"borderColor\": \"var(--button_bot_shadow)\",\r\n                    \"marginBottom\": \"5px\",\r\n                    \"paddingTop\": \"5px\",\r\n                    \"paddingBottom\": \"5px\",\r\n                    \"backgroundColor\": \"var(--background_content)\",\r\n                    \"padding\": \"12px\",\r\n                    \"color\": \"var(--accent)\",\r\n                    \"flexWrap\":\"wrap\",\r\n                }} onClick={this.click}>\r\n                    <div style={{\"display\":\"flex\",\"height\":\"32px\"}}>\r\n                        <div style={{\r\n                            \"display\": \"flex\",\r\n                            \"float\": \"left\",\r\n                            \"alignItems\": \"center\",\r\n                            \"justifyContent\": \"center\",\r\n                            \"width\": \"16px\",\r\n                            \"height\": \"16px\"\r\n                        }}>\r\n                            {this.state.opened ? <Icon16Dropdown fill=\"var(--accent)\"/> :\r\n                                <Icon16Chevron fill=\"var(--accent)\"/>}\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            \"display\": \"flex\",\r\n                            \"float\": \"left\",\r\n                            \"alignItems\": \"center\",\r\n                            \"justifyContent\": \"center\",\r\n                            \"marginLeft\": \"7px\",\r\n                            \"width\": \"100%\"\r\n                        }}>{this.state.animeName} / {this.state.animeNameRus}</div>\r\n\r\n                    </div>\r\n                    <br/>\r\n                    <div style={{\"paddingTop\":\"7px\", \"display\":\"flex\",\"width\":\"100%\"}}>\r\n                        <div style={{\"display\": \"flex\", \"width\": \"100%\"}}>\r\n                            <Button stretched level={this.getButtonStyle(this.state.subStatus)}\r\n                                    before={this.getBeforeSymbol(this.state.subStatus)}\r\n                                    onClick={(e) => this.clickButton(e, 0)}\r\n                                    style={{\"minWidth\": \"120px\",\"marginRight\":\"6px\"}}>Субтитры</Button>\r\n                            <Button stretched level={this.getButtonStyle(this.state.dubStatus)}\r\n                                    before={this.getBeforeSymbol(this.state.dubStatus)}\r\n                                    onClick={(e) => this.clickButton(e, 1)}\r\n                                    style={{\"minWidth\": \"120px\", \"marginLeft\":\"6px\"}}>Озвучка</Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default SubscribeBlock;","import React from 'react';\r\nimport {\r\n    Button,\r\n    Spinner\r\n\r\n} from '@vkontakte/vkui';\r\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\r\nimport Icon16Chevron from '@vkontakte/icons/dist/16/chevron';\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\r\nclass SubscribeBlockMobile extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state= {\r\n            animeId: props.anime.anime_id,\r\n            animeName: props.anime.anime_name,\r\n            animeNameRus: props.anime.anime_name_rus,\r\n            shikiId: props.anime.shiki_id,\r\n            subStatus: props.anime.sub_status,\r\n            dubStatus: props.anime.dub_status,\r\n            shikiResp:undefined,\r\n            opened:false,\r\n            showed:props.anime.showed\r\n        };\r\n        this.click = this.click.bind(this);\r\n        this.clickButton = this.clickButton.bind(this);\r\n    }\r\n\r\n    click(e){\r\n        this.setState({opened:!this.state.opened})\r\n    }\r\n\r\n    clickButton(e,type){\r\n        console.log(e)\r\n        if( (type===0 && (this.state.subStatus!==-2 && this.state.subStatus!==-1)) || (type===1 && (this.state.dubStatus!==-2 && this.state.dubStatus!==-1))){\r\n            switch(type){\r\n                case 0:\r\n                    this.setState({subStatus:-2});\r\n                    break;\r\n                case 1:\r\n                    this.setState({dubStatus:-2});\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    getButtonStyle(status){\r\n        switch (status) {\r\n            case -1:\r\n                return \"secondary\";\r\n            case 0:\r\n                return \"primary\";\r\n            case 1:\r\n                return \"outline\";\r\n            case -2:\r\n                return \"secondary\";\r\n\r\n        }\r\n    }\r\n    getBeforeSymbol(status){\r\n        switch(status){\r\n            case 1:\r\n                return <Icon16Done/>;\r\n            case -2:\r\n                return <Spinner size={\"small\"} />\r\n        }\r\n    }\r\n\r\n    render(){\r\n        if(this.state.showed){\r\n            return (\r\n\r\n                <div style={{\"display\":\"flex\",\"fontSize\":\"13px\",\"borderTop\":\"0px\", \"borderBottom\":\"1px\", \"borderRight\":\"0px\", \"borderLeft\":\"0px\", \"borderStyle\":\"solid\", \"borderColor\":\"var(--button_bot_shadow)\", \"marginBottom\":\"5px\", \"paddingTop\":\"5px\", \"paddingBottom\":\"5px\",\"backgroundColor\":\"var(--background_content)\", \"padding\":\"12px\", \"color\":\"var(--accent)\",}} onClick={this.click}>\r\n                    <div style={{\"display\":\"flex\",\"float\":\"left\", \"alignItems\":\"center\",\"justifyContent\":\"center\",\"minWidth\":\"300\"}}>\r\n                        <div style={{}}>\r\n                            {this.state.opened ? <Icon16Dropdown fill=\"var(--accent)\"/> : <Icon16Chevron fill=\"var(--accent)\"/>}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{\"display\":\"flex\",\"float\":\"left\", \"marginLeft\":\"7px\"}}>{this.state.animeName}<br/>{this.state.animeNameRus}</div>\r\n                    <div style={{\"display\":\"flex\", \"width\":\"auto\"}}>\r\n                        <Button stretched level={this.getButtonStyle(this.state.subStatus)} before={this.getBeforeSymbol(this.state.subStatus)} onClick={(e)=>this.clickButton(e,0)} style={{\"minWidth\":\"120px\"}}>Субтитры</Button>\r\n                        <Button stretched level={this.getButtonStyle(this.state.dubStatus)} before={this.getBeforeSymbol(this.state.dubStatus)} onClick={(e)=>this.clickButton(e,1)} style={{\"minWidth\":\"120px\"}}>Озвучка</Button>\r\n                    </div>\r\n                </div>\r\n\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default SubscribeBlockMobile;","import React from 'react';\n//import connect from '@vkontakte/vkui-connect';\nimport {\n    View,\n    Root,\n    FixedLayout, Search, Group, Div, Panel,\n\n} from '@vkontakte/vkui';\nimport {platform, IOS, ANDROID} from '@vkontakte/vkui';\n\nimport '@vkontakte/vkui/dist/vkui.css';\nimport queryString from 'query-string';\nimport Header from './common/Header'\nimport connect from '@vkontakte/vkui-connect'\nimport SubscribeBlock from \"./common/SubscribeBlock\";\nimport SubscribeBlockMobile from \"./common/SubscribeBlockMobile\";\n\nvar sprintf = require('sprintf-js').sprintf;\n\n\nconst reqSubscribeList = 'https://api.sovetromantica.com/api/v1/notify/vkapp/%s/get'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        let params = queryString.parse(window.location.search);\n        this.state = {\n            mode: 'subscribe',\n            rights: params.vk_viewer_group_role,\n            userId: params.vk_user_id,\n            clientType: params.vk_platform,\n            subscribeTitles: []\n        };\n\n\n    }\n\n\n    selectScreen() {\n\n    }\n\n    componentDidMount() {\n        let data = new FormData();\n        let params = queryString.parse(window.location.search);\n        for (let par in params) {\n            data.append(par, params[par]);\n        }\n        fetch(sprintf(reqSubscribeList, this.state.userId), {method: 'POST', body: data})\n            .then(resp => resp.json())\n            .then((result) => {\n                for(let el in result){\n                    result[el].showed=true;\n                }\n                this.setState({subscribeTitles: result});\n                console.log(result);\n            });\n\n    }\n\n\n    render() {\n        return (\n            <Root activeView=\"sub-title\">\n                <View id=\"sub-title\" activePanel={this.state.mode}>\n                    <Panel id=\"subscribe\">\n                        <Header rights={this.state.rights} mode={this.state.mode}/>\n                        <Search/>\n                        {this.state.subscribeTitles.map(item => (\n                            (this.state.clientType!=='desktop_web')?<SubscribeBlockMobile anime={item}/>:<SubscribeBlock anime={item}/>\n\n                        ))}\n                    </Panel>\n                </View>\n            </Root>\n\n        );\n    }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nfunction registerValidSW(swUrl) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the old content will have been purged and\n\t\t\t\t\t\t\t// the fresh content will have been added to the cache.\n\t\t\t\t\t\t\t// It's the perfect time to display a \"New content is\n\t\t\t\t\t\t\t// available; please refresh.\" message in your web app.\n\t\t\t\t\t\t\tconsole.log('New content is available; please refresh.');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\tresponse.headers.get('content-type').indexOf('javascript') === -1\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n\t// [::1] is the IPv6 localhost address.\n\twindow.location.hostname === '[::1]' ||\n\t// 127.0.0.1/8 is considered localhost for IPv4.\n\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\nexport default function register() {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Lets check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://goo.gl/SC7cgQ'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not local host. Just register service worker\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\nimport registerServiceWorker from './sw';\nimport unregister from './sw'\n\nconnect.subscribe((e) => {\n    switch (e.detail.type) {\n        case 'VKWebAppUpdateConfig':\n            let schemeAttribute = document.createAttribute('scheme');\n            schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n            document.body.attributes.setNamedItem(schemeAttribute);\n            break;\n\n        default:\n            console.log(e.detail.type);\n    }\n});\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n//registerServiceWorker();\n\n\n\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}