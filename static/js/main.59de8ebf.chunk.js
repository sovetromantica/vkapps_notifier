(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);a(67),a(92);var n=a(0),i=a.n(n),s=a(39),o=a.n(s),l=a(27),r=a.n(l),c=a(17),d=a(18),m=a(20),u=a(19),h=a(21),b=a(5),p=(a(115),a(40)),f=a.n(p),v=a(9),g=a(28),E=a.n(g),w=a(64),y=a.n(w),k=a(29),x=a.n(k),j=a(41),C=a.n(j),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={rights:e.rights,mode:e.mode,opened:!1},a.toggleContext=a.toggleContext.bind(Object(v.a)(Object(v.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"toggleContext",value:function(){this.setState({opened:!this.state.opened})}},{key:"render",value:function(){return"editor"===this.state.rights||"admin"===this.state.rights?i.a.createElement(b.PanelHeader,null,i.a.createElement(b.PanelHeaderContent,{aside:i.a.createElement(E.a,null),onClick:this.toggleContext},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),i.a.createElement(b.HeaderContext,{opened:this.state.opened,onClose:this.toggleContext},i.a.createElement(b.List,null,i.a.createElement(b.Cell,{before:i.a.createElement(y.a,null),asideContent:"subscribe"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"subscribe"},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),i.a.createElement(b.Cell,{before:i.a.createElement(C.a,null),asideContent:"statistic_full"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"statistic_full"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),i.a.createElement(b.Cell,{before:i.a.createElement(C.a,null),asideContent:"statistic_cur"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"statistic_cur"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0435\u0437\u043e\u043d")))):i.a.createElement(b.PanelHeader,null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")}}]),t}(i.a.Component),_=a(65),S=a.n(_),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={animeId:e.anime.anime_id,animeName:e.anime.anime_name,animeNameRus:e.anime.anime_name_rus,shikiId:e.anime.shiki_id,subStatus:e.anime.sub_status,dubStatus:e.anime.dub_status,shikiResp:void 0,opened:!1,showed:e.anime.showed},a.click=a.click.bind(Object(v.a)(Object(v.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"click",value:function(e){this.setState({opened:!this.state.opened})}},{key:"render",value:function(){if(this.state.showed)return i.a.createElement("div",{style:{display:"flex","font-size":"13px","border-top":"0px","border-bottom":"1px","border-right":"0px","border-left":"0px","border-style":"solid","border-color":"var(--button_bot_shadow)","margin-bottom":"5px","padding-top":"5px","padding-bottom":"5px","background-color":"var(--background_content)",padding:"12px",color:"var(--accent)"},onClick:this.click},i.a.createElement("div",{style:{display:"flex",float:"left","align-items":"center","justify-content":"center"}},i.a.createElement("div",{style:{}},this.state.opened?i.a.createElement(E.a,{fill:"var(--accent)"}):i.a.createElement(S.a,{fill:"var(--accent)"}))),i.a.createElement("div",{style:{display:"inline",float:"left","margin-left":"7px"}},this.state.animeName,i.a.createElement("br",null),this.state.animeNameRus))}}]),t}(i.a.Component),P=a(127).sprintf,N=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(m.a)(this,Object(u.a)(t).call(this,e));var n=f.a.parse(window.location.search);return a.state={mode:"subscribe",rights:n.vk_viewer_group_role,userId:n.vk_user_id,subscribeTitles:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"selectScreen",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=new FormData,a=f.a.parse(window.location.search);for(var n in a)t.append(n,a[n]);fetch(P("https://api.sovetromantica.com/api/v1/notify/vkapp/%s/get",this.state.userId),{method:"POST",body:t}).then(function(e){return e.json()}).then(function(t){for(var a in t)t[a].showed=!0;e.setState({subscribeTitles:t}),console.log(t)})}},{key:"render",value:function(){return i.a.createElement(b.Root,{activeView:"sub-title"},i.a.createElement(b.View,{id:"sub-title",activePanel:this.state.mode},i.a.createElement(b.Panel,{id:"subscribe"},i.a.createElement(O,{rights:this.state.rights,mode:this.state.mode}),i.a.createElement(b.Search,null),this.state.subscribeTitles.map(function(e){return i.a.createElement(I,{anime:e})}))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(t);break;default:console.log(e.detail.type)}}),r.a.send("VKWebAppInit",{}),o.a.render(i.a.createElement(N,null),document.getElementById("root"))},66:function(e,t,a){e.exports=a(128)}},[[66,1,2]]]);
//# sourceMappingURL=main.59de8ebf.chunk.js.map