(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);a(68),a(93);var n=a(0),i=a.n(n),s=a(41),l=a.n(s),o=a(29),r=a.n(o),c=a(10),u=a(11),d=a(14),m=a(12),h=a(13),b=a(1),p=(a(115),a(42)),f=a.n(p),y=a(6),v=a(22),g=a.n(v),k=a(66),S=a.n(k),E=a(31),x=a.n(E),w=a(43),j=a.n(w),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={rights:e.rights,mode:e.mode,opened:!1},a.toggleContext=a.toggleContext.bind(Object(y.a)(Object(y.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"toggleContext",value:function(){this.setState({opened:!this.state.opened})}},{key:"render",value:function(){return"editor"===this.state.rights||"admin"===this.state.rights?i.a.createElement(b.PanelHeader,null,i.a.createElement(b.PanelHeaderContent,{aside:i.a.createElement(g.a,null),onClick:this.toggleContext},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),i.a.createElement(b.HeaderContext,{opened:this.state.opened,onClose:this.toggleContext},i.a.createElement(b.List,null,i.a.createElement(b.Cell,{before:i.a.createElement(S.a,null),asideContent:"subscribe"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"subscribe"},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),i.a.createElement(b.Cell,{before:i.a.createElement(j.a,null),asideContent:"statistic_full"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"statistic_full"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),i.a.createElement(b.Cell,{before:i.a.createElement(j.a,null),asideContent:"statistic_cur"===this.state.mode?i.a.createElement(x.a,{fill:"var(--accent)"}):i.a.createElement("div",{style:{width:"24px"}}),"data-mode":"statistic_cur"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0435\u0437\u043e\u043d")))):i.a.createElement(b.PanelHeader,null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")}}]),t}(i.a.Component),C=a(30),_=a.n(C),O=a(24),I=a.n(O),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={animeId:e.anime.anime_id,animeName:e.anime.anime_name,animeNameRus:e.anime.anime_name_rus,shikiId:e.anime.shiki_id,subStatus:e.anime.sub_status,dubStatus:e.anime.dub_status,shikiResp:void 0,opened:!1,showed:e.anime.showed},a.click=a.click.bind(Object(y.a)(Object(y.a)(a))),a.clickButton=a.clickButton.bind(Object(y.a)(Object(y.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"click",value:function(e){this.setState({opened:!this.state.opened})}},{key:"clickButton",value:function(e,t){if(console.log(e),0===t&&-2!==this.state.subStatus&&-1!==this.state.subStatus||1===t&&-2!==this.state.dubStatus&&-1!==this.state.dubStatus)switch(t){case 0:this.setState({subStatus:-2});break;case 1:this.setState({dubStatus:-2})}}},{key:"getButtonStyle",value:function(e){switch(e){case-1:return"secondary";case 0:return"primary";case 1:return"outline";case-2:return"secondary"}}},{key:"getBeforeSymbol",value:function(e){switch(e){case 1:return i.a.createElement(I.a,null);case-2:return i.a.createElement(b.Spinner,{size:"small"})}}},{key:"render",value:function(){var e=this;if(this.state.showed)return i.a.createElement("div",{style:{display:"block",fontSize:"13px",borderTop:"0px",borderBottom:"1px",borderRight:"0px",borderLeft:"0px",borderStyle:"solid",borderColor:"var(--button_bot_shadow)",marginBottom:"5px",paddingTop:"5px",paddingBottom:"5px",backgroundColor:"var(--background_content)",padding:"12px",color:"var(--accent)",flexWrap:"wrap"},onClick:this.click},i.a.createElement("div",{style:{display:"flex",height:"32px"}},i.a.createElement("div",{style:{display:"flex",float:"left",alignItems:"center",justifyContent:"center",width:"17px",height:"32px"}},this.state.opened?i.a.createElement(g.a,{fill:"var(--accent)"}):i.a.createElement(_.a,{fill:"var(--accent)"})),i.a.createElement("div",{style:{display:"flex",float:"left",alignItems:"center",justifyContent:"left",marginLeft:"7px",width:"100%"}},this.state.animeName," / ",this.state.animeNameRus)),i.a.createElement("br",null),i.a.createElement("div",{style:{display:"flex",width:"100%"}},i.a.createElement("div",{style:{display:"flex",width:"100%"}},i.a.createElement(b.Button,{stretched:!0,level:this.getButtonStyle(this.state.subStatus),before:this.getBeforeSymbol(this.state.subStatus),onClick:function(t){return e.clickButton(t,0)},style:{minWidth:"120px",marginRight:"6px"}},"\u0421\u0443\u0431\u0442\u0438\u0442\u0440\u044b"),i.a.createElement(b.Button,{stretched:!0,level:this.getButtonStyle(this.state.dubStatus),before:this.getBeforeSymbol(this.state.dubStatus),onClick:function(t){return e.clickButton(t,1)},style:{minWidth:"120px",marginLeft:"6px"}},"\u041e\u0437\u0432\u0443\u0447\u043a\u0430"))))}}]),t}(i.a.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={animeId:e.anime.anime_id,animeName:e.anime.anime_name,animeNameRus:e.anime.anime_name_rus,shikiId:e.anime.shiki_id,subStatus:e.anime.sub_status,dubStatus:e.anime.dub_status,shikiResp:void 0,opened:!1,showed:e.anime.showed},a.click=a.click.bind(Object(y.a)(Object(y.a)(a))),a.clickButton=a.clickButton.bind(Object(y.a)(Object(y.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"click",value:function(e){this.setState({opened:!this.state.opened})}},{key:"clickButton",value:function(e,t){if(console.log(e),0===t&&-2!==this.state.subStatus&&-1!==this.state.subStatus||1===t&&-2!==this.state.dubStatus&&-1!==this.state.dubStatus)switch(t){case 0:this.setState({subStatus:-2});break;case 1:this.setState({dubStatus:-2})}}},{key:"getButtonStyle",value:function(e){switch(e){case-1:return"secondary";case 0:return"primary";case 1:return"outline";case-2:return"secondary"}}},{key:"getBeforeSymbol",value:function(e){switch(e){case 1:return i.a.createElement(I.a,null);case-2:return i.a.createElement(b.Spinner,{size:"small"})}}},{key:"render",value:function(){var e=this;if(this.state.showed)return i.a.createElement("div",{style:{display:"flex",fontSize:"13px",borderTop:"0px",borderBottom:"1px",borderRight:"0px",borderLeft:"0px",borderStyle:"solid",borderColor:"var(--button_bot_shadow)",marginBottom:"5px",paddingTop:"5px",paddingBottom:"5px",backgroundColor:"var(--background_content)",padding:"12px",color:"var(--accent)"},onClick:this.click},i.a.createElement("div",{style:{display:"flex",float:"left",alignItems:"center",justifyContent:"center",minWidth:"300"}},i.a.createElement("div",{style:{}},this.state.opened?i.a.createElement(g.a,{fill:"var(--accent)"}):i.a.createElement(_.a,{fill:"var(--accent)"}))),i.a.createElement("div",{style:{display:"flex",float:"left",marginLeft:"7px"}},this.state.animeName,i.a.createElement("br",null),this.state.animeNameRus),i.a.createElement("div",{style:{display:"flex",width:"auto"}},i.a.createElement(b.Button,{stretched:!0,level:this.getButtonStyle(this.state.subStatus),before:this.getBeforeSymbol(this.state.subStatus),onClick:function(t){return e.clickButton(t,0)},style:{minWidth:"120px"}},"\u0421\u0443\u0431\u0442\u0438\u0442\u0440\u044b"),i.a.createElement(b.Button,{stretched:!0,level:this.getButtonStyle(this.state.dubStatus),before:this.getBeforeSymbol(this.state.dubStatus),onClick:function(t){return e.clickButton(t,1)},style:{minWidth:"120px"}},"\u041e\u0437\u0432\u0443\u0447\u043a\u0430")))}}]),t}(i.a.Component),N=a(127).sprintf,W=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(d.a)(this,Object(m.a)(t).call(this,e));var n=f.a.parse(window.location.search);return a.state={mode:"subscribe",rights:n.vk_viewer_group_role,userId:n.vk_user_id,clientType:n.vk_platform,subscribeTitles:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"selectScreen",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=new FormData,a=f.a.parse(window.location.search);for(var n in a)t.append(n,a[n]);fetch(N("https://api.sovetromantica.com/api/v1/notify/vkapp/%s/get",this.state.userId),{method:"POST",body:t}).then(function(e){return e.json()}).then(function(t){for(var a in t)t[a].showed=!0;e.setState({subscribeTitles:t}),console.log(t)})}},{key:"render",value:function(){var e=this;return i.a.createElement(b.Root,{activeView:"sub-title"},i.a.createElement(b.View,{id:"sub-title",activePanel:this.state.mode},i.a.createElement(b.Panel,{id:"subscribe"},i.a.createElement(B,{rights:this.state.rights,mode:this.state.mode}),i.a.createElement(b.Search,null),this.state.subscribeTitles.map(function(t){return"desktop_web"!==e.state.clientType?i.a.createElement(T,{anime:t}):i.a.createElement(R,{anime:t})}))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(t);break;default:console.log(e.detail.type)}}),r.a.send("VKWebAppInit",{}),l.a.render(i.a.createElement(W,null),document.getElementById("root"))},67:function(e,t,a){e.exports=a(128)}},[[67,1,2]]]);
//# sourceMappingURL=main.49163eef.chunk.js.map